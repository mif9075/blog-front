{"ast":null,"code":"import jwt_decode from 'jwt-decode';\nimport setAuthToken from './setAuthToken';\nimport { setAuthSuccessUser, logout } from '../redux/action/authUserAction';\n\nconst checkTokenAuth = store => {\n  let jwtToken = localStorage.getItem('jwtToken');\n  console.log(jwtToken);\n  let decoded;\n\n  if (jwtToken) {\n    setAuthToken(jwtToken);\n    decoded = jwt_decode(jwtToken);\n    store.dispatch(setAuthSuccessUser(decoded));\n    const currentTime = Date.now() / 1000;\n\n    if (decoded.exp < currentTime) {\n      store.dispatch(logout());\n      window.location.href = '/signin';\n    }\n  }\n};\n\nexport default checkTokenAuth;","map":{"version":3,"sources":["/Users/pakchu/Desktop/CIM-All-Code/blog-auth-redux/src/lib/checkTokenAuth.js"],"names":["jwt_decode","setAuthToken","setAuthSuccessUser","logout","checkTokenAuth","store","jwtToken","localStorage","getItem","console","log","decoded","dispatch","currentTime","Date","now","exp","window","location","href"],"mappings":"AAAA,OAAOA,UAAP,MAAuB,YAAvB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,SAASC,kBAAT,EAA6BC,MAA7B,QAA2C,gCAA3C;;AAEA,MAAMC,cAAc,GAAIC,KAAD,IAAW;AAGhC,MAAIC,QAAQ,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAf;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAZ;AACA,MAAIK,OAAJ;;AACA,MAAIL,QAAJ,EAAc;AACZL,IAAAA,YAAY,CAACK,QAAD,CAAZ;AACAK,IAAAA,OAAO,GAAGX,UAAU,CAACM,QAAD,CAApB;AACAD,IAAAA,KAAK,CAACO,QAAN,CAAeV,kBAAkB,CAACS,OAAD,CAAjC;AACA,UAAME,WAAW,GAAGC,IAAI,CAACC,GAAL,KAAa,IAAjC;;AACA,QAAIJ,OAAO,CAACK,GAAR,GAAcH,WAAlB,EAA+B;AAE7BR,MAAAA,KAAK,CAACO,QAAN,CAAeT,MAAM,EAArB;AAEAc,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,SAAvB;AACD;AACF;AAMF,CAvBD;;AAyBA,eAAef,cAAf","sourcesContent":["import jwt_decode from 'jwt-decode';\nimport setAuthToken from './setAuthToken';\nimport { setAuthSuccessUser, logout } from '../redux/action/authUserAction';\n\nconst checkTokenAuth = (store) => {\n\n\n  let jwtToken = localStorage.getItem('jwtToken');\n  console.log(jwtToken)\n  let decoded;\n  if (jwtToken) {\n    setAuthToken(jwtToken);\n    decoded = jwt_decode(jwtToken);\n    store.dispatch(setAuthSuccessUser(decoded));\n    const currentTime = Date.now() / 1000;\n    if (decoded.exp < currentTime) {\n \n      store.dispatch(logout());\n \n      window.location.href = '/signin';\n    }\n  }\n\n \n \n\n  \n}\n\nexport default checkTokenAuth;"]},"metadata":{},"sourceType":"module"}