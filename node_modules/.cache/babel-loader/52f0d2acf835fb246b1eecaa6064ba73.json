{"ast":null,"code":"import jwt_decode from 'jwt-decode';\nimport setAuthToken from './setAuthToken';\nimport { setAuthSuccessUser, logout, clearCurrentProfile } from '../redux/action/authUserAction';\n\nconst checkTokenAuth = store => {\n  setAuthToken(localStorage.jwtToken);\n  const decoded = jwt_decode(localStorage.jwtToken);\n  store.dispatch(setAuthSuccessUser(decoded));\n  const currentTime = Date.now() / 1000;\n\n  if (decoded.exp < currentTime) {\n    store.dispatch(logout());\n    store.dispatch(clearCurrentProfile());\n    window.location.href = '/signin';\n  }\n};\n\nexport default checkTokenAuth;","map":{"version":3,"sources":["/Users/pakchu/Desktop/CIM-All-Code/blog-auth-redux/src/lib/checkTokenAuth.js"],"names":["jwt_decode","setAuthToken","setAuthSuccessUser","logout","clearCurrentProfile","checkTokenAuth","store","localStorage","jwtToken","decoded","dispatch","currentTime","Date","now","exp","window","location","href"],"mappings":"AAAA,OAAOA,UAAP,MAAuB,YAAvB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,SAASC,kBAAT,EAA6BC,MAA7B,EAAqCC,mBAArC,QAAgE,gCAAhE;;AAEA,MAAMC,cAAc,GAAIC,KAAD,IAAW;AAE/BL,EAAAA,YAAY,CAACM,YAAY,CAACC,QAAd,CAAZ;AAEA,QAAMC,OAAO,GAAGT,UAAU,CAACO,YAAY,CAACC,QAAd,CAA1B;AAEAF,EAAAA,KAAK,CAACI,QAAN,CAAeR,kBAAkB,CAACO,OAAD,CAAjC;AAGA,QAAME,WAAW,GAAGC,IAAI,CAACC,GAAL,KAAa,IAAjC;;AACA,MAAIJ,OAAO,CAACK,GAAR,GAAcH,WAAlB,EAA+B;AAE7BL,IAAAA,KAAK,CAACI,QAAN,CAAeP,MAAM,EAArB;AAEAG,IAAAA,KAAK,CAACI,QAAN,CAAeN,mBAAmB,EAAlC;AAEAW,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,SAAvB;AACD;AACH,CAlBD;;AAoBA,eAAeZ,cAAf","sourcesContent":["import jwt_decode from 'jwt-decode';\nimport setAuthToken from './setAuthToken';\nimport { setAuthSuccessUser, logout, clearCurrentProfile } from '../redux/action/authUserAction';\n\nconst checkTokenAuth = (store) => {\n  \n   setAuthToken(localStorage.jwtToken);\n\n   const decoded = jwt_decode(localStorage.jwtToken);\n\n   store.dispatch(setAuthSuccessUser(decoded));\n \n\n   const currentTime = Date.now() / 1000;\n   if (decoded.exp < currentTime) {\n\n     store.dispatch(logout());\n\n     store.dispatch(clearCurrentProfile());\n\n     window.location.href = '/signin';\n   }\n}\n\nexport default checkTokenAuth;"]},"metadata":{},"sourceType":"module"}